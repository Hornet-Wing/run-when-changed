{"version":3,"sources":["../run-when-changed.js"],"names":[],"mappings":";;AAEA,IAAM,YAAY,QAAQ,WAAR,CAAlB;AACA,IAAM,iBAAiB,QAAQ,QAAR,EAAkB,OAAzC;AACA,IAAM,UAAU,EAAhB;;AAEA,SAAS,GAAT,CAAa,GAAb,EAAkB,KAAlB,EAAyB;AACvB,MAAI,OAAO,QAAQ,QAAQ,MAAR,GAAiB,CAAzB,CAAX;;AAEA,MAAI,QAAQ,QAAQ,OAApB,EAA6B;AAC3B,QAAM,OAAO,OAAO,IAAP,CAAY,IAAZ,EAAkB,IAAlB,CAAuB,GAAvB,CAAb;AACA,QAAI,SAAS,OAAb,EAAsB;AACpB,aAAO,IAAP;AACD;AACF;;AAED,MAAI,CAAC,IAAL,EAAW;AACT,WAAO,EAAP;AACA,YAAQ,IAAR,CAAa,IAAb;AACD;;AAED,MAAI,CAAC,KAAK,GAAL,CAAL,EAAgB;AACd,SAAK,GAAL,IAAY,EAAZ;AACD;;AAED,OAAK,GAAL,EAAU,IAAV,CAAe,KAAf;AACD;;AAED,UACG,KADH,CACS,yFADT,EAEG,WAFH,CAEe,+DAFf,EAGG,MAHH,CAGU,oBAHV,EAGgC,qCAHhC,EAGuE;AAAA,SAAO,IAAI,OAAJ,EAAa,GAAb,CAAP;AAAA,CAHvE,EAIG,MAJH,CAIU,kBAJV,EAI8B,kCAJ9B,EAIkE;AAAA,SAAO,IAAI,MAAJ,EAAY,GAAZ,CAAP;AAAA,CAJlE,EAKG,MALH,CAKU,oBALV,EAKgC,wCALhC,EAK0E;AAAA,SAAO,IAAI,OAAJ,EAAa,GAAb,CAAP;AAAA,CAL1E,EAMG,MANH,CAMU,WANV,EAMuB,cANvB,EAOG,KAPH,CAOS,QAAQ,IAPjB;;AASA,eAAe,OAAf,EAAwB;AACtB,WAAS,UAAU;AADG,CAAxB","file":"run-when-changed.js","sourcesContent":["\n\nconst commander = require('commander');\nconst runWhenChanged = require('../lib').default;\nconst watches = [];\n\nfunction add(key, value) {\n  var node = watches[watches.length - 1];\n\n  if (node && key === 'watch') {\n    const keys = Object.keys(node).join(' ');\n    if (keys !== 'watch') {\n      node = null;\n    }\n  }\n\n  if (!node) {\n    node = {};\n    watches.push(node);\n  }\n\n  if (!node[key]) {\n    node[key] = [];\n  }\n\n  node[key].push(value);\n}\n\ncommander\n  .usage('--watch <glob> --match [glob] --exec <cmd> (--watch <glob> --match [glob] --exec <cmd>)')\n  .description('Selectively executes commands when watched files are changed.')\n  .option('-w, --watch <glob>', 'A glob to watch, starts a new group', val => add('watch', val))\n  .option('-e, --exec <cmd>', 'Command to execute, eg \"echo %s\"', val => add('exec', val))\n  .option('-m, --match [glob]', 'Only files that match will be executed', val => add('match', val))\n  .option('--verbose', 'Verbose mode')\n  .parse(process.argv)\n\nrunWhenChanged(watches, {\n  verbose: commander.verbose\n});\n"]}